webpackJsonp([1],{496:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=a(0),o=a.n(l),c=a(10),u=a(6),m=a.n(u),d=a(454),g=(a.n(d),a(21)),h=a.n(g),p=a(1),f=(a.n(p),a(7)),E=(a.n(f),a(450)),b=a(449),v=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),y=function(e){function t(e){s(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleChange=function(e){a.setState(n({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),sessionStorage.clear(),a.setState({submitting:!0});var t={email:a.state.email,password:a.state.password};m.a.post("https://api.klikfood.id/index.php/login",h.a.stringify(t)).then(function(e){var t=e;t.data.success&&(sessionStorage.setItem("api_token",t.data.data.api_token),sessionStorage.setItem("username",t.data.data.user.name),sessionStorage.setItem("email",t.data.data.user.email),sessionStorage.setItem("kota",t.data.data.user.address),sessionStorage.setItem("id",t.data.data.user._id),sessionStorage.setItem("role",t.data.data.role)),p.toast.success("Selamat Datang !"),setTimeout(function(){a.setState({submitting:!0,redirect:!0})},2e3),console.log(e)}).catch(function(e){p.toast.error("Gagal Menghubungi Server :("),a.setState({submitting:!1})})},a.handleRegister=function(e){e.preventDefault(),sessionStorage.clear(),a.setState({registrating:!0});var t={name:a.state.registName,username:a.state.registUsername,email:a.state.registEmail,password:a.state.registPassword,address:document.getElementById("from_places").value,detail_address:a.state.registDetailAddress,no_tlp:a.state.registHp};console.log(h.a.stringify(t));m.a.post("https://api.klikfood.id/index.php/register/konsumen",h.a.stringify(t)).then(function(e){p.toast.success("Silahkan Cek Email Verifikasi !"),setTimeout(function(){a.setState({registrating:!0,redirect:!0})},2e3),console.log(e)}).catch(function(e){p.toast.error("Gagal Menghubungi Server :("),a.setState({registrating:!1})})},a.state={name:"",email:"",registName:"",registEmail:"",registPassword:"",registAddress:"",registDetailAddress:"",registHp:"",submitting:!1,registrating:!1,redirect:!1},a.handleChange=a.handleChange.bind(a),a}return i(t,e),v(t,[{key:"componentDidMount",value:function(){var e=this.props.location.search.split("=");0!==e.length&&this.setState({registEmail:e[1]})}},{key:"render",value:function(){return this.state.redirect?o.a.createElement(c.c,{to:"/"}):0!==sessionStorage.length?(p.toast.success("Anda Sudah Login !"),o.a.createElement(c.c,{to:"/"})):o.a.createElement("div",null,o.a.createElement("section",{style:{marginBottom:"80px"}},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("center",null,o.a.createElement("h3",null,"Untuk Sementara, Kami Hanya Melayani Wilayah Jabodetabek.")),o.a.createElement("div",{className:"col-sm-4 col-sm-offset-1"},o.a.createElement("div",{className:"login-form"},o.a.createElement("h2",null,"Masuk ke Akun Anda"),o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("input",{type:"text",name:"email",placeholder:"Username / Email",value:this.state.email,onChange:this.handleChange,required:!0}),o.a.createElement("input",{type:"password",name:"password",placeholder:"Password",value:this.state.password,onChange:this.handleChange,required:!0}),o.a.createElement(c.b,{to:"/forget"},"Lupa Kata Sandi?"),this.state.submitting?o.a.createElement("div",null,o.a.createElement("b",null,"Sedang Masuk...")):o.a.createElement("button",{type:"submit",className:"btn btn-success"},"Masuk")))),o.a.createElement("div",{className:"col-sm-1"},o.a.createElement("h2",{className:"or"},"Atau")),o.a.createElement("div",{className:"col-sm-4"},o.a.createElement("div",{className:"signup-form"},o.a.createElement("h2",null,"Pendaftar Baru"),o.a.createElement("form",{onSubmit:this.handleRegister,id:"distance_form"},o.a.createElement("input",{type:"text",name:"registName",placeholder:"Nama",value:this.state.registName,onChange:this.handleChange,required:!0}),o.a.createElement("input",{class:"form-control",id:"from_places",placeholder:"Kota",name:"registAddress",onChange:this.handleChange}),o.a.createElement("input",{id:"origin",name:"registAddress",onChange:this.handleChange,required:"",type:"hidden"}),o.a.createElement("input",{type:"text",name:"registDetailAddress",placeholder:"Alamat Detail ( Jalan / RT / RW )",value:this.state.registDetailAddress,onChange:this.handleChange,required:!0}),o.a.createElement("input",{type:"text",name:"registUsername",placeholder:"Username (Harus Mengandung Angka)",value:this.state.registUsername,onChange:this.handleChange,required:!0}),o.a.createElement("input",{type:"email",name:"registEmail",placeholder:"Alamat Email",value:this.state.registEmail,onChange:this.handleChange,required:!0}),o.a.createElement("input",{type:"password",name:"registPassword",placeholder:"Password",value:this.state.registPassword,onChange:this.handleChange,required:!0}),o.a.createElement("input",{type:"text",name:"registHp",placeholder:"No HP",value:this.state.registHp,onChange:this.handleChange,required:!0}),this.state.registrating?o.a.createElement("div",null,o.a.createElement("b",null,"Mendaftar...")):o.a.createElement("button",{type:"submit",className:"btn btn-success"},"Daftar"))))))),o.a.createElement("footer",{id:"footer"},o.a.createElement(E.a,null),o.a.createElement(b.a,null)))}}]),t}(l.Component);t.default=y}});
//# sourceMappingURL=1.1ce48dcf.chunk.js.map